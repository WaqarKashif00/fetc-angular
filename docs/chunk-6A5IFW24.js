import{a as D,b as x,c as P,d as U,e as N,f as L,g as j,h as G,i as $}from"./chunk-4PGDXCHP.js";import{e as Q}from"./chunk-HBNKWRHV.js";import{a as I}from"./chunk-SL7N67HH.js";import{$a as o,Ca as a,Ma as f,Rb as B,Sa as u,Ua as y,Wa as E,X as A,Xa as c,Za as F,_a as T,aa as q,ab as n,bb as b,e as v,eb as h,fb as g,gb as m,ia as p,ja as _,ka as S,kb as l,la as M,lb as C,mb as w,ob as V,za as k}from"./chunk-N3FP7RWP.js";var H=(i,s)=>s.id;function z(i,s){if(i&1&&(o(0,"div",9),l(1),n()),i&2){let e=m();a(),w(" ",e.successMessage()," ")}}function J(i,s){if(i&1&&(o(0,"div",10),l(1),n()),i&2){let e=m();a(),w(" ",e.errorMessage()," ")}}function O(i,s){i&1&&(o(0,"span"),l(1,"Edit Blog Post"),n())}function X(i,s){i&1&&(o(0,"span"),l(1,"Create New Blog Post"),n())}function K(i,s){i&1&&(o(0,"p",20),l(1,"Title is required"),n())}function W(i,s){i&1&&(o(0,"p",20),l(1,"Content is required"),n())}function Y(i,s){if(i&1){let e=h();o(0,"div",22),b(1,"img",37),o(2,"button",38),g("click",function(){p(e);let t=m(2);return _(t.removeImage())}),S(),o(3,"svg",39),b(4,"path",40),n()()()}if(i&2){let e=m(2);a(),y("src",e.blogImagePreview(),k)}}function Z(i,s){i&1&&(o(0,"span"),l(1,"Saving..."),n())}function ee(i,s){i&1&&(o(0,"span"),l(1,"Update Blog"),n())}function te(i,s){i&1&&(o(0,"span"),l(1,"Create Blog"),n())}function ie(i,s){if(i&1){let e=h();o(0,"button",41),g("click",function(){p(e);let t=m(2);return _(t.cancelEdit())}),l(1," Cancel "),n()}}function ne(i,s){if(i&1){let e=h();o(0,"div",42)(1,"div",43)(2,"h3",44),l(3),n()(),o(4,"p",45),l(5),n(),o(6,"div",3)(7,"span",30),l(8),n(),o(9,"div",46)(10,"button",47),g("click",function(){let t=p(e).$implicit,d=m(3);return _(d.startEditBlog(t))}),l(11," Edit "),n(),o(12,"button",48),g("click",function(){let t=p(e).$implicit,d=m(3);return _(d.deleteBlog(t.id))}),l(13," Delete "),n()()()()}if(i&2){let e=s.$implicit,r=m(3);a(3),C(e.title),a(2),C(e.content),a(3),C(r.formatDate(e.createdAt))}}function oe(i,s){if(i&1&&(o(0,"div",36),F(1,ne,14,3,"div",42,H),n()),i&2){let e=m(2);a(),T(e.blogs())}}function le(i,s){i&1&&(o(0,"div",49)(1,"p"),l(2,"No blog posts yet. Create your first one!"),n()())}function re(i,s){if(i&1){let e=h();o(0,"div",14)(1,"div",15)(2,"h2",16),u(3,O,2,0,"span")(4,X,2,0),n(),o(5,"form",17),g("ngSubmit",function(){p(e);let t=m();return _(t.submitBlog())}),o(6,"div")(7,"label",18),l(8," Title * "),n(),b(9,"input",19),u(10,K,2,0,"p",20),n(),o(11,"div")(12,"label",18),l(13," Content * "),n(),b(14,"textarea",21),u(15,W,2,0,"p",20),n(),o(16,"div")(17,"label",18),l(18," Blog Image "),n(),u(19,Y,5,1,"div",22),o(20,"div",23)(21,"label",24)(22,"div",25),S(),o(23,"svg",26),b(24,"path",27),n(),M(),o(25,"p",28)(26,"span",29),l(27,"Click to upload"),n(),l(28," or drag and drop"),n(),o(29,"p",30),l(30,"PNG, JPG or GIF (MAX. 5MB)"),n()(),o(31,"input",31),g("change",function(t){p(e);let d=m();return _(d.onImageSelected(t))}),n()()()(),o(32,"div")(33,"label",18),l(34," Image URL (optional - use this OR upload file) "),n(),b(35,"input",32),n(),o(36,"div",33)(37,"button",34),u(38,Z,2,0,"span")(39,ee,2,0)(40,te,2,0),n(),u(41,ie,2,0,"button",35),n()()(),o(42,"div",15)(43,"h2",16),l(44),n(),u(45,oe,3,0,"div",36)(46,le,3,0),n()()}if(i&2){let e,r,t=m();a(3),c(3,t.editingBlog()?3:4),a(2),y("formGroup",t.blogForm),a(5),c(10,(e=t.blogForm.get("title"))!=null&&e.touched&&((e=t.blogForm.get("title"))!=null&&e.hasError("required"))?10:-1),a(5),c(15,(r=t.blogForm.get("content"))!=null&&r.touched&&((r=t.blogForm.get("content"))!=null&&r.hasError("required"))?15:-1),a(4),c(19,t.blogImagePreview()?19:-1),a(18),y("disabled",t.loading()||t.blogForm.invalid),a(),c(38,t.loading()?38:t.editingBlog()?39:40),a(3),c(41,t.editingBlog()?41:-1),a(3),w(" Published Blogs (",t.blogs().length,") "),a(),c(45,t.blogs().length>0?45:46)}}function ae(i,s){i&1&&(o(0,"span"),l(1,"Edit FAQ"),n())}function se(i,s){i&1&&(o(0,"span"),l(1,"Create New FAQ"),n())}function de(i,s){i&1&&(o(0,"p",20),l(1,"Question is required"),n())}function me(i,s){i&1&&(o(0,"p",20),l(1,"Answer is required"),n())}function ce(i,s){i&1&&(o(0,"span"),l(1,"Saving..."),n())}function ue(i,s){i&1&&(o(0,"span"),l(1,"Update FAQ"),n())}function ge(i,s){i&1&&(o(0,"span"),l(1,"Create FAQ"),n())}function pe(i,s){if(i&1){let e=h();o(0,"button",41),g("click",function(){p(e);let t=m(2);return _(t.cancelEdit())}),l(1," Cancel "),n()}}function _e(i,s){if(i&1){let e=h();o(0,"div",42)(1,"h3",52),l(2),n(),o(3,"p",53),l(4),n(),o(5,"div",3)(6,"span",30),l(7),n(),o(8,"div",46)(9,"button",47),g("click",function(){let t=p(e).$implicit,d=m(3);return _(d.startEditFAQ(t))}),l(10," Edit "),n(),o(11,"button",48),g("click",function(){let t=p(e).$implicit,d=m(3);return _(d.deleteFAQ(t.id))}),l(12," Delete "),n()()()()}if(i&2){let e=s.$implicit,r=m(3);a(2),C(e.question),a(2),C(e.answer),a(3),C(r.formatDate(e.createdAt))}}function fe(i,s){if(i&1&&(o(0,"div",36),F(1,_e,13,3,"div",42,H),n()),i&2){let e=m(2);a(),T(e.faqs())}}function be(i,s){i&1&&(o(0,"div",49)(1,"p"),l(2,"No FAQs yet. Create your first one!"),n()())}function xe(i,s){if(i&1){let e=h();o(0,"div",14)(1,"div",15)(2,"h2",16),u(3,ae,2,0,"span")(4,se,2,0),n(),o(5,"form",17),g("ngSubmit",function(){p(e);let t=m();return _(t.submitFAQ())}),o(6,"div")(7,"label",18),l(8," Question * "),n(),b(9,"input",50),u(10,de,2,0,"p",20),n(),o(11,"div")(12,"label",18),l(13," Answer * "),n(),b(14,"textarea",51),u(15,me,2,0,"p",20),n(),o(16,"div",33)(17,"button",34),u(18,ce,2,0,"span")(19,ue,2,0)(20,ge,2,0),n(),u(21,pe,2,0,"button",35),n()()(),o(22,"div",15)(23,"h2",16),l(24),n(),u(25,fe,3,0,"div",36)(26,be,3,0),n()()}if(i&2){let e,r,t=m();a(3),c(3,t.editingFAQ()?3:4),a(2),y("formGroup",t.faqForm),a(5),c(10,(e=t.faqForm.get("question"))!=null&&e.touched&&((e=t.faqForm.get("question"))!=null&&e.hasError("required"))?10:-1),a(5),c(15,(r=t.faqForm.get("answer"))!=null&&r.touched&&((r=t.faqForm.get("answer"))!=null&&r.hasError("required"))?15:-1),a(2),y("disabled",t.loading()||t.faqForm.invalid),a(),c(18,t.loading()?18:t.editingFAQ()?19:20),a(3),c(21,t.editingFAQ()?21:-1),a(3),w(" Published FAQs (",t.faqs().length,") "),a(),c(25,t.faqs().length>0?25:26)}}var Fe=(()=>{class i{constructor(){this.fb=A(G),this.router=A(Q),this.firebaseService=A(I),this.activeTab=f("blogs"),this.editingBlog=f(null),this.editingFAQ=f(null),this.loading=f(!1),this.successMessage=f(""),this.errorMessage=f(""),this.blogs=this.firebaseService.blogs,this.faqs=this.firebaseService.faqs,this.currentUser=this.firebaseService.currentUser,this.blogImage=f(null),this.blogImagePreview=f(""),this.blogForm=this.fb.group({title:["",[x.required,x.minLength(5)]],content:["",[x.required,x.minLength(20)]],imageUrl:[""]}),this.faqForm=this.fb.group({question:["",[x.required,x.minLength(5)]],answer:["",[x.required,x.minLength(10)]]})}setActiveTab(e){this.activeTab.set(e),this.cancelEdit()}onImageSelected(e){let r=e.target;if(r.files&&r.files[0]){let t=r.files[0];this.blogImage.set(t);let d=new FileReader;d.onload=R=>{this.blogImagePreview.set(R.target?.result)},d.readAsDataURL(t)}}removeImage(){this.blogImage.set(null),this.blogImagePreview.set("")}startEditBlog(e){this.editingBlog.set(e),this.blogForm.patchValue({title:e.title,content:e.content,imageUrl:e.imageUrl||""}),e.imageUrl&&this.blogImagePreview.set(e.imageUrl)}submitBlog(){return v(this,null,function*(){if(!this.blogForm.invalid){this.loading.set(!0),this.clearMessages();try{let e=this.blogForm.value,r={title:e.title,content:e.content,imageUrl:e.imageUrl||void 0,createdAt:new Date},t=this.editingBlog(),d=this.blogImage();t&&t.id?(yield this.firebaseService.updateBlog(t.id,r,d||void 0),this.successMessage.set("Blog post updated successfully!")):(yield this.firebaseService.addBlog(r,d||void 0),this.successMessage.set("Blog post created successfully!")),this.blogForm.reset(),this.editingBlog.set(null),this.removeImage()}catch(e){console.error("Error saving blog:",e),this.errorMessage.set("Failed to save blog post. Please try again.")}finally{this.loading.set(!1),this.autoHideMessages()}}})}deleteBlog(e){return v(this,null,function*(){if(confirm("Are you sure you want to delete this blog post?")){this.loading.set(!0),this.clearMessages();try{yield this.firebaseService.deleteBlog(e),this.successMessage.set("Blog post deleted successfully!")}catch{this.errorMessage.set("Failed to delete blog post. Please try again.")}finally{this.loading.set(!1),this.autoHideMessages()}}})}startEditFAQ(e){this.editingFAQ.set(e),this.faqForm.patchValue({question:e.question,answer:e.answer})}submitFAQ(){return v(this,null,function*(){if(!this.faqForm.invalid){this.loading.set(!0),this.clearMessages();try{let e=this.faqForm.value,r={question:e.question,answer:e.answer,createdAt:new Date},t=this.editingFAQ();t&&t.id?(yield this.firebaseService.updateFAQ(t.id,r),this.successMessage.set("FAQ updated successfully!")):(yield this.firebaseService.addFAQ(r),this.successMessage.set("FAQ created successfully!")),this.faqForm.reset(),this.editingFAQ.set(null)}catch{this.errorMessage.set("Failed to save FAQ. Please try again.")}finally{this.loading.set(!1),this.autoHideMessages()}}})}deleteFAQ(e){return v(this,null,function*(){if(confirm("Are you sure you want to delete this FAQ?")){this.loading.set(!0),this.clearMessages();try{yield this.firebaseService.deleteFAQ(e),this.successMessage.set("FAQ deleted successfully!")}catch{this.errorMessage.set("Failed to delete FAQ. Please try again.")}finally{this.loading.set(!1),this.autoHideMessages()}}})}cancelEdit(){this.editingBlog.set(null),this.editingFAQ.set(null),this.blogForm.reset(),this.faqForm.reset(),this.removeImage(),this.clearMessages()}logout(){return v(this,null,function*(){try{yield this.firebaseService.logout(),this.router.navigate(["/login"])}catch(e){console.error("Logout error:",e)}})}clearMessages(){this.successMessage.set(""),this.errorMessage.set("")}autoHideMessages(){setTimeout(()=>{this.clearMessages()},5e3)}formatDate(e){return e?(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=q({type:i,selectors:[["app-admin"]],standalone:!0,features:[V],decls:22,vars:17,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-midnight-blue","text-white","py-4","shadow-lg"],[1,"container","mx-auto","px-4"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold"],[1,"flex","items-center","space-x-4"],[1,"text-gray-300"],[1,"bg-red-600","hover:bg-red-700","px-4","py-2","rounded-lg","transition-colors","duration-300","font-semibold",3,"click"],[1,"container","mx-auto","px-4","py-8"],[1,"mb-6","bg-green-50","border","border-green-200","text-green-700","px-6","py-4","rounded-lg","animate-on-scroll"],[1,"mb-6","bg-red-50","border","border-red-200","text-red-700","px-6","py-4","rounded-lg","animate-on-scroll"],[1,"mb-8","border-b","border-gray-300"],[1,"flex","space-x-4"],[1,"px-6","py-3","font-semibold","text-gray-600","hover:text-midnight-blue","transition-colors","duration-300",3,"click"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-white","rounded-lg","shadow-lg","p-6","animate-on-scroll"],[1,"text-2xl","font-bold","text-midnight-blue","mb-6"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["type","text","formControlName","title","placeholder","Enter blog title",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-midnight-blue","focus:border-transparent"],[1,"text-red-500","text-sm","mt-1"],["formControlName","content","rows","8","placeholder","Enter blog content",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-midnight-blue","focus:border-transparent"],[1,"relative","mb-4"],[1,"flex","items-center","justify-center","w-full"],[1,"flex","flex-col","items-center","justify-center","w-full","h-32","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100","transition-colors"],[1,"flex","flex-col","items-center","justify-center","pt-5","pb-6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","mb-3","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],[1,"mb-2","text-sm","text-gray-500"],[1,"font-semibold"],[1,"text-xs","text-gray-500"],["type","file","accept","image/*",1,"hidden",3,"change"],["type","url","formControlName","imageUrl","placeholder","https://example.com/image.jpg",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-midnight-blue","focus:border-transparent"],[1,"flex","space-x-3"],["type","submit",1,"flex-1","bg-midnight-blue","text-white","py-3","rounded-lg","font-semibold","hover:bg-blue-900","transition-all","duration-300","disabled:bg-gray-400",3,"disabled"],["type","button",1,"px-6","bg-gray-300","text-gray-700","py-3","rounded-lg","font-semibold","hover:bg-gray-400","transition-all","duration-300"],[1,"space-y-4","max-h-[600px]","overflow-y-auto"],["alt","Blog preview",1,"w-full","h-48","object-cover","rounded-lg",3,"src"],["type","button",1,"absolute","top-2","right-2","p-2","bg-red-500","text-white","rounded-full","hover:bg-red-600","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["type","button",1,"px-6","bg-gray-300","text-gray-700","py-3","rounded-lg","font-semibold","hover:bg-gray-400","transition-all","duration-300",3,"click"],[1,"border","border-gray-200","rounded-lg","p-4","hover:shadow-md","transition-shadow","duration-300"],[1,"flex","items-start","justify-between","mb-2"],[1,"font-bold","text-lg","text-midnight-blue","flex-1"],[1,"text-gray-600","text-sm","mb-3","line-clamp-2"],[1,"flex","space-x-2"],[1,"px-3","py-1","bg-blue-500","text-white","rounded","hover:bg-blue-600","transition-colors","duration-300","text-sm",3,"click"],[1,"px-3","py-1","bg-red-500","text-white","rounded","hover:bg-red-600","transition-colors","duration-300","text-sm",3,"click"],[1,"text-center","py-10","text-gray-500"],["type","text","formControlName","question","placeholder","Enter the question",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-midnight-blue","focus:border-transparent"],["formControlName","answer","rows","6","placeholder","Enter the answer",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-midnight-blue","focus:border-transparent"],[1,"font-bold","text-lg","text-midnight-blue","mb-2"],[1,"text-gray-600","text-sm","mb-3"]],template:function(r,t){if(r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),l(5,"Admin Dashboard"),n(),o(6,"div",5)(7,"span",6),l(8),n(),o(9,"button",7),g("click",function(){return t.logout()}),l(10," Logout "),n()()()()(),o(11,"div",8),u(12,z,2,1,"div",9)(13,J,2,1,"div",10),o(14,"div",11)(15,"div",12)(16,"button",13),g("click",function(){return t.setActiveTab("blogs")}),l(17," Manage Blogs "),n(),o(18,"button",13),g("click",function(){return t.setActiveTab("faqs")}),l(19," Manage FAQs "),n()()(),u(20,re,47,10,"div",14)(21,xe,27,9,"div",14),n()()),r&2){let d;a(8),C((d=t.currentUser())==null?null:d.email),a(4),c(12,t.successMessage()?12:-1),a(),c(13,t.errorMessage()?13:-1),a(3),E("border-b-2",t.activeTab()==="blogs")("border-muted-gold",t.activeTab()==="blogs")("text-muted-gold",t.activeTab()==="blogs"),a(2),E("border-b-2",t.activeTab()==="faqs")("border-muted-gold",t.activeTab()==="faqs")("text-muted-gold",t.activeTab()==="faqs"),a(2),c(20,t.activeTab()==="blogs"?20:-1),a(),c(21,t.activeTab()==="faqs"?21:-1)}},dependencies:[B,$,N,D,P,U,L,j],encapsulation:2})}}return i})();export{Fe as AdminComponent};
