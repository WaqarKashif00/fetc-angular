import{a as U,b as x,c as D,d as N,e as L,f as G,g as j,h as R,i as H}from"./chunk-B7WAPQCY.js";import{f as Q}from"./chunk-E6QN2RKQ.js";import{a as P}from"./chunk-52COB3PY.js";import{Ja as k,Ma as r,Wa as b,X as A,aa as I,ab as g,cb as v,cc as B,e as w,eb as T,fb as c,hb as M,ia as _,ib as q,ja as f,jb as o,ka as S,kb as n,la as F,lb as p,ob as C,pb as u,qb as m,vb as l,wb as y,xb as E,zb as V}from"./chunk-YQE5UYSC.js";var $=(i,s)=>s.id;function z(i,s){if(i&1&&(o(0,"div",9),l(1),n()),i&2){let e=m();r(),E(" ",e.successMessage()," ")}}function J(i,s){if(i&1&&(o(0,"div",10),l(1),n()),i&2){let e=m();r(),E(" ",e.errorMessage()," ")}}function O(i,s){i&1&&(o(0,"span"),l(1,"Edit Blog Post"),n())}function W(i,s){i&1&&(o(0,"span"),l(1,"Create New Blog Post"),n())}function X(i,s){i&1&&(o(0,"p",20),l(1,"Title is required"),n())}function K(i,s){i&1&&(o(0,"p",20),l(1,"Content is required"),n())}function Y(i,s){i&1&&(o(0,"div",47),l(1," File Ready to Upload "),n())}function Z(i,s){if(i&1){let e=C();o(0,"div",22),p(1,"img",43),o(2,"button",44),u("click",function(){_(e);let t=m(2);return f(t.removeImage())}),S(),o(3,"svg",45),p(4,"path",46),n()(),g(5,Y,2,0,"div",47),n()}if(i&2){let e=m(2);r(),v("src",e.blogImagePreview(),k),r(4),c(5,e.blogImage()?5:-1)}}function ee(i,s){i&1&&(o(0,"p",38)(1,"span",29),l(2,"Note:"),n(),l(3," Image file is selected. Remove the file to use URL instead. "),n())}function te(i,s){i&1&&(S(),o(0,"svg",48),p(1,"circle",49)(2,"path",50),n(),F(),o(3,"span"),l(4,"Uploading Image..."),n())}function ie(i,s){i&1&&(S(),o(0,"svg",48),p(1,"circle",49)(2,"path",50),n(),F(),o(3,"span"),l(4,"Saving..."),n())}function ne(i,s){i&1&&(o(0,"span"),l(1,"Update Blog"),n())}function oe(i,s){i&1&&(o(0,"span"),l(1,"Create Blog"),n())}function le(i,s){if(i&1){let e=C();o(0,"button",51),u("click",function(){_(e);let t=m(2);return f(t.cancelEdit())}),l(1," Cancel "),n()}if(i&2){let e=m(2);v("disabled",e.loading())}}function ae(i,s){if(i&1){let e=C();o(0,"div",52)(1,"div",53)(2,"h3",54),l(3),n()(),o(4,"p",55),l(5),n(),o(6,"div",3)(7,"span",30),l(8),n(),o(9,"div",56)(10,"button",57),u("click",function(){let t=_(e).$implicit,d=m(3);return f(d.startEditBlog(t))}),l(11," Edit "),n(),o(12,"button",58),u("click",function(){let t=_(e).$implicit,d=m(3);return f(d.deleteBlog(t.id))}),l(13," Delete "),n()()()()}if(i&2){let e=s.$implicit,a=m(3);r(3),y(e.title),r(2),y(e.content),r(3),y(a.formatDate(e.createdAt))}}function re(i,s){if(i&1&&(o(0,"div",42),M(1,ae,14,3,"div",52,$),n()),i&2){let e=m(2);r(),q(e.blogs())}}function se(i,s){i&1&&(o(0,"div",59)(1,"p"),l(2,"No blog posts yet. Create your first one!"),n()())}function de(i,s){if(i&1){let e=C();o(0,"div",14)(1,"div",15)(2,"h2",16),g(3,O,2,0,"span")(4,W,2,0),n(),o(5,"form",17),u("ngSubmit",function(){_(e);let t=m();return f(t.submitBlog())}),o(6,"div")(7,"label",18),l(8," Title * "),n(),p(9,"input",19),g(10,X,2,0,"p",20),n(),o(11,"div")(12,"label",18),l(13," Content * "),n(),p(14,"textarea",21),g(15,K,2,0,"p",20),n(),o(16,"div")(17,"label",18),l(18," Blog Image "),n(),g(19,Z,6,2,"div",22),o(20,"div",23)(21,"label",24)(22,"div",25),S(),o(23,"svg",26),p(24,"path",27),n(),F(),o(25,"p",28)(26,"span",29),l(27,"Click to upload image file"),n(),l(28," or drag and drop "),n(),o(29,"p",30),l(30,"PNG, JPG or GIF (MAX. 5MB)"),n()(),o(31,"input",31),u("change",function(t){_(e);let d=m();return f(d.onImageSelected(t))}),n()()(),o(32,"div",32)(33,"div",33),p(34,"div",34),n(),o(35,"div",35)(36,"span",36),l(37,"OR use image URL"),n()()(),p(38,"input",37),g(39,ee,4,0,"p",38),n(),o(40,"div",39)(41,"button",40),g(42,te,5,0)(43,ie,5,0)(44,ne,2,0)(45,oe,2,0),n(),g(46,le,2,1,"button",41),n()()(),o(47,"div",15)(48,"h2",16),l(49),n(),g(50,re,3,0,"div",42)(51,se,3,0),n()()}if(i&2){let e,a,t=m();r(3),c(3,t.editingBlog()?3:4),r(2),v("formGroup",t.blogForm),r(5),c(10,(e=t.blogForm.get("title"))!=null&&e.touched&&((e=t.blogForm.get("title"))!=null&&e.hasError("required"))?10:-1),r(5),c(15,(a=t.blogForm.get("content"))!=null&&a.touched&&((a=t.blogForm.get("content"))!=null&&a.hasError("required"))?15:-1),r(4),c(19,t.blogImagePreview()?19:-1),r(19),v("disabled",!!t.blogImage()),r(),c(39,t.blogImage()?39:-1),r(2),v("disabled",t.loading()||t.blogForm.invalid),r(),c(42,t.uploadingImage()?42:t.loading()?43:t.editingBlog()?44:45),r(4),c(46,t.editingBlog()?46:-1),r(3),E(" Published Blogs (",t.blogs().length,") "),r(),c(50,t.blogs().length>0?50:51)}}function me(i,s){i&1&&(o(0,"span"),l(1,"Edit FAQ"),n())}function ce(i,s){i&1&&(o(0,"span"),l(1,"Create New FAQ"),n())}function ge(i,s){i&1&&(o(0,"p",20),l(1,"Question is required"),n())}function ue(i,s){i&1&&(o(0,"p",20),l(1,"Answer is required"),n())}function pe(i,s){i&1&&(o(0,"span"),l(1,"Saving..."),n())}function _e(i,s){i&1&&(o(0,"span"),l(1,"Update FAQ"),n())}function fe(i,s){i&1&&(o(0,"span"),l(1,"Create FAQ"),n())}function be(i,s){if(i&1){let e=C();o(0,"button",64),u("click",function(){_(e);let t=m(2);return f(t.cancelEdit())}),l(1," Cancel "),n()}}function xe(i,s){if(i&1){let e=C();o(0,"div",52)(1,"h3",65),l(2),n(),o(3,"p",66),l(4),n(),o(5,"div",3)(6,"span",30),l(7),n(),o(8,"div",56)(9,"button",57),u("click",function(){let t=_(e).$implicit,d=m(3);return f(d.startEditFAQ(t))}),l(10," Edit "),n(),o(11,"button",58),u("click",function(){let t=_(e).$implicit,d=m(3);return f(d.deleteFAQ(t.id))}),l(12," Delete "),n()()()()}if(i&2){let e=s.$implicit,a=m(3);r(2),y(e.question),r(2),y(e.answer),r(3),y(a.formatDate(e.createdAt))}}function he(i,s){if(i&1&&(o(0,"div",42),M(1,xe,13,3,"div",52,$),n()),i&2){let e=m(2);r(),q(e.faqs())}}function ve(i,s){i&1&&(o(0,"div",59)(1,"p"),l(2,"No FAQs yet. Create your first one!"),n()())}function Ce(i,s){if(i&1){let e=C();o(0,"div",14)(1,"div",15)(2,"h2",16),g(3,me,2,0,"span")(4,ce,2,0),n(),o(5,"form",17),u("ngSubmit",function(){_(e);let t=m();return f(t.submitFAQ())}),o(6,"div")(7,"label",18),l(8," Question * "),n(),p(9,"input",60),g(10,ge,2,0,"p",20),n(),o(11,"div")(12,"label",18),l(13," Answer * "),n(),p(14,"textarea",61),g(15,ue,2,0,"p",20),n(),o(16,"div",39)(17,"button",62),g(18,pe,2,0,"span")(19,_e,2,0)(20,fe,2,0),n(),g(21,be,2,0,"button",63),n()()(),o(22,"div",15)(23,"h2",16),l(24),n(),g(25,he,3,0,"div",42)(26,ve,3,0),n()()}if(i&2){let e,a,t=m();r(3),c(3,t.editingFAQ()?3:4),r(2),v("formGroup",t.faqForm),r(5),c(10,(e=t.faqForm.get("question"))!=null&&e.touched&&((e=t.faqForm.get("question"))!=null&&e.hasError("required"))?10:-1),r(5),c(15,(a=t.faqForm.get("answer"))!=null&&a.touched&&((a=t.faqForm.get("answer"))!=null&&a.hasError("required"))?15:-1),r(2),v("disabled",t.loading()||t.faqForm.invalid),r(),c(18,t.loading()?18:t.editingFAQ()?19:20),r(3),c(21,t.editingFAQ()?21:-1),r(3),E(" Published FAQs (",t.faqs().length,") "),r(),c(25,t.faqs().length>0?25:26)}}var qe=(()=>{class i{constructor(){this.fb=A(R),this.router=A(Q),this.firebaseService=A(P),this.activeTab=b("blogs"),this.editingBlog=b(null),this.editingFAQ=b(null),this.loading=b(!1),this.uploadingImage=b(!1),this.successMessage=b(""),this.errorMessage=b(""),this.blogs=this.firebaseService.blogs,this.faqs=this.firebaseService.faqs,this.currentUser=this.firebaseService.currentUser,this.blogImage=b(null),this.blogImagePreview=b(""),this.blogForm=this.fb.group({title:["",[x.required,x.minLength(5)]],content:["",[x.required,x.minLength(20)]],imageUrl:[""]}),this.faqForm=this.fb.group({question:["",[x.required,x.minLength(5)]],answer:["",[x.required,x.minLength(10)]]})}setActiveTab(e){this.activeTab.set(e),this.cancelEdit()}onImageSelected(e){let a=e.target;if(a.files&&a.files[0]){let t=a.files[0];if(!t.type.startsWith("image/")){this.errorMessage.set("Please select an image file (PNG, JPG, GIF)");return}if(t.size>5*1024*1024){this.errorMessage.set("Image size must be less than 5MB");return}this.blogImage.set(t);let d=new FileReader;d.onload=h=>{this.blogImagePreview.set(h.target?.result)},d.readAsDataURL(t),this.blogForm.patchValue({imageUrl:""})}}removeImage(){this.blogImage.set(null),this.blogImagePreview.set("");let e=document.querySelector('input[type="file"]');e&&(e.value="")}startEditBlog(e){this.editingBlog.set(e),this.blogForm.patchValue({title:e.title,content:e.content,imageUrl:e.imageUrl||""}),e.imageUrl&&this.blogImagePreview.set(e.imageUrl),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}submitBlog(){return w(this,null,function*(){if(this.blogForm.invalid){this.errorMessage.set("Please fill in all required fields");return}this.loading.set(!0),this.clearMessages();try{let e=this.blogForm.value,a=this.blogImage(),t=e.imageUrl;if(!a&&!t){this.errorMessage.set("Please provide an image (upload file or enter URL)"),this.loading.set(!1);return}let d={title:e.title,content:e.content,imageUrl:t||"",createdAt:new Date},h=this.editingBlog();a?(this.uploadingImage.set(!0),h&&h.id?(yield this.firebaseService.updateBlog(h.id,d,a),this.successMessage.set("Blog post updated successfully with new image!")):(yield this.firebaseService.addBlog(d,a),this.successMessage.set("Blog post created successfully with uploaded image!")),this.uploadingImage.set(!1)):h&&h.id?(yield this.firebaseService.updateBlog(h.id,d),this.successMessage.set("Blog post updated successfully!")):(yield this.firebaseService.addBlog(d),this.successMessage.set("Blog post created successfully!")),this.blogForm.reset(),this.editingBlog.set(null),this.removeImage()}catch(e){console.error("Error saving blog:",e),this.errorMessage.set(`Failed to save blog post: ${e.message||"Please try again"}`)}finally{this.loading.set(!1),this.uploadingImage.set(!1),this.autoHideMessages()}})}deleteBlog(e){return w(this,null,function*(){if(confirm("Are you sure you want to delete this blog post?")){this.loading.set(!0),this.clearMessages();try{yield this.firebaseService.deleteBlog(e),this.successMessage.set("Blog post deleted successfully!")}catch{this.errorMessage.set("Failed to delete blog post. Please try again.")}finally{this.loading.set(!1),this.autoHideMessages()}}})}startEditFAQ(e){this.editingFAQ.set(e),this.faqForm.patchValue({question:e.question,answer:e.answer}),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}submitFAQ(){return w(this,null,function*(){if(!this.faqForm.invalid){this.loading.set(!0),this.clearMessages();try{let e=this.faqForm.value,a={question:e.question,answer:e.answer,createdAt:new Date},t=this.editingFAQ();t&&t.id?(yield this.firebaseService.updateFAQ(t.id,a),this.successMessage.set("FAQ updated successfully!")):(yield this.firebaseService.addFAQ(a),this.successMessage.set("FAQ created successfully!")),this.faqForm.reset(),this.editingFAQ.set(null)}catch{this.errorMessage.set("Failed to save FAQ. Please try again.")}finally{this.loading.set(!1),this.autoHideMessages()}}})}deleteFAQ(e){return w(this,null,function*(){if(confirm("Are you sure you want to delete this FAQ?")){this.loading.set(!0),this.clearMessages();try{yield this.firebaseService.deleteFAQ(e),this.successMessage.set("FAQ deleted successfully!")}catch{this.errorMessage.set("Failed to delete FAQ. Please try again.")}finally{this.loading.set(!1),this.autoHideMessages()}}})}cancelEdit(){this.editingBlog.set(null),this.editingFAQ.set(null),this.blogForm.reset(),this.faqForm.reset(),this.removeImage(),this.clearMessages()}logout(){return w(this,null,function*(){try{yield this.firebaseService.logout(),this.router.navigate(["/login"])}catch(e){console.error("Logout error:",e)}})}clearMessages(){this.successMessage.set(""),this.errorMessage.set("")}autoHideMessages(){setTimeout(()=>{this.clearMessages()},5e3)}formatDate(e){return e?(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275cmp=I({type:i,selectors:[["app-admin"]],standalone:!0,features:[V],decls:22,vars:17,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-midnight-blue","text-white","py-4","shadow-lg"],[1,"container","mx-auto","px-4"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold"],[1,"flex","items-center","space-x-4"],[1,"text-gray-300"],[1,"bg-red-600","hover:bg-red-700","px-4","py-2","rounded-lg","transition-colors","duration-300","font-semibold",3,"click"],[1,"container","mx-auto","px-4","py-8"],[1,"mb-6","bg-green-50","border","border-green-200","text-green-700","px-6","py-4","rounded-lg","animate-on-scroll"],[1,"mb-6","bg-red-50","border","border-red-200","text-red-700","px-6","py-4","rounded-lg","animate-on-scroll"],[1,"mb-8","border-b","border-gray-300"],[1,"flex","space-x-4"],[1,"px-6","py-3","font-semibold","text-gray-600","hover:text-midnight-blue","transition-colors","duration-300",3,"click"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-white","rounded-lg","shadow-lg","p-6","animate-on-scroll"],[1,"text-2xl","font-bold","text-midnight-blue","mb-6"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["type","text","formControlName","title","placeholder","Enter blog title",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-midnight-blue","focus:border-transparent"],[1,"text-red-500","text-sm","mt-1"],["formControlName","content","rows","8","placeholder","Enter blog content",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-midnight-blue","focus:border-transparent"],[1,"relative","mb-4"],[1,"mb-4"],[1,"flex","flex-col","items-center","justify-center","w-full","h-32","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100","transition-colors"],[1,"flex","flex-col","items-center","justify-center","pt-5","pb-6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","mb-3","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],[1,"mb-2","text-sm","text-gray-500"],[1,"font-semibold"],[1,"text-xs","text-gray-500"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"relative","my-4"],[1,"absolute","inset-0","flex","items-center"],[1,"w-full","border-t","border-gray-300"],[1,"relative","flex","justify-center","text-sm"],[1,"px-2","bg-white","text-gray-500","font-semibold"],["type","url","formControlName","imageUrl","placeholder","https://example.com/image.jpg",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-midnight-blue","focus:border-transparent","disabled:bg-gray-100","disabled:cursor-not-allowed",3,"disabled"],[1,"text-sm","text-gray-500","mt-2"],[1,"flex","space-x-3"],["type","submit",1,"flex-1","bg-midnight-blue","text-white","py-3","rounded-lg","font-semibold","hover:bg-blue-900","transition-all","duration-300","disabled:bg-gray-400","disabled:cursor-not-allowed","flex","items-center","justify-center","gap-2",3,"disabled"],["type","button",1,"px-6","bg-gray-300","text-gray-700","py-3","rounded-lg","font-semibold","hover:bg-gray-400","transition-all","duration-300","disabled:opacity-50",3,"disabled"],[1,"space-y-4","max-h-[600px]","overflow-y-auto"],["alt","Blog preview",1,"w-full","h-48","object-cover","rounded-lg","border-2","border-gray-300",3,"src"],["type","button",1,"absolute","top-2","right-2","p-2","bg-red-500","text-white","rounded-full","hover:bg-red-600","transition-colors","shadow-lg",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"absolute","bottom-2","left-2","px-3","py-1","bg-green-500","text-white","text-xs","rounded-full","font-semibold"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["type","button",1,"px-6","bg-gray-300","text-gray-700","py-3","rounded-lg","font-semibold","hover:bg-gray-400","transition-all","duration-300","disabled:opacity-50",3,"click","disabled"],[1,"border","border-gray-200","rounded-lg","p-4","hover:shadow-md","transition-shadow","duration-300"],[1,"flex","items-start","justify-between","mb-2"],[1,"font-bold","text-lg","text-midnight-blue","flex-1"],[1,"text-gray-600","text-sm","mb-3","line-clamp-2"],[1,"flex","space-x-2"],[1,"px-3","py-1","bg-blue-500","text-white","rounded","hover:bg-blue-600","transition-colors","duration-300","text-sm",3,"click"],[1,"px-3","py-1","bg-red-500","text-white","rounded","hover:bg-red-600","transition-colors","duration-300","text-sm",3,"click"],[1,"text-center","py-10","text-gray-500"],["type","text","formControlName","question","placeholder","Enter the question",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-midnight-blue","focus:border-transparent"],["formControlName","answer","rows","6","placeholder","Enter the answer",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-midnight-blue","focus:border-transparent"],["type","submit",1,"flex-1","bg-midnight-blue","text-white","py-3","rounded-lg","font-semibold","hover:bg-blue-900","transition-all","duration-300","disabled:bg-gray-400",3,"disabled"],["type","button",1,"px-6","bg-gray-300","text-gray-700","py-3","rounded-lg","font-semibold","hover:bg-gray-400","transition-all","duration-300"],["type","button",1,"px-6","bg-gray-300","text-gray-700","py-3","rounded-lg","font-semibold","hover:bg-gray-400","transition-all","duration-300",3,"click"],[1,"font-bold","text-lg","text-midnight-blue","mb-2"],[1,"text-gray-600","text-sm","mb-3"]],template:function(a,t){if(a&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),l(5,"Admin Dashboard"),n(),o(6,"div",5)(7,"span",6),l(8),n(),o(9,"button",7),u("click",function(){return t.logout()}),l(10," Logout "),n()()()()(),o(11,"div",8),g(12,z,2,1,"div",9)(13,J,2,1,"div",10),o(14,"div",11)(15,"div",12)(16,"button",13),u("click",function(){return t.setActiveTab("blogs")}),l(17," Manage Blogs "),n(),o(18,"button",13),u("click",function(){return t.setActiveTab("faqs")}),l(19," Manage FAQs "),n()()(),g(20,de,52,12,"div",14)(21,Ce,27,9,"div",14),n()()),a&2){let d;r(8),y((d=t.currentUser())==null?null:d.email),r(4),c(12,t.successMessage()?12:-1),r(),c(13,t.errorMessage()?13:-1),r(3),T("border-b-2",t.activeTab()==="blogs")("border-muted-gold",t.activeTab()==="blogs")("text-muted-gold",t.activeTab()==="blogs"),r(2),T("border-b-2",t.activeTab()==="faqs")("border-muted-gold",t.activeTab()==="faqs")("text-muted-gold",t.activeTab()==="faqs"),r(2),c(20,t.activeTab()==="blogs"?20:-1),r(),c(21,t.activeTab()==="faqs"?21:-1)}},dependencies:[B,H,L,U,D,N,G,j],encapsulation:2})}}return i})();export{qe as AdminComponent};
